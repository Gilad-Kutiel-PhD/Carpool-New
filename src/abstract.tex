
The \carpool problem is a star packing problem in directed graphs.
Formally, given a directed graph $G = (V, A)$, a capacity function $c:
V \rightarrow \N$, and a weight function $w: A \rightarrow \R^+$, a
feasible \emph{carpool matching} is a subset of arcs, $M \subseteq A$,
such that every $v \in V$ satisfies:%
\begin{inparaenum}[(i)]
\item $\din[M](v) \cdot \dout[M](v) = 0$,
\item $\din[M](v) \leq c(v)$, and 
\item $\dout[M](v) \leq 1$.
\end{inparaenum}
A vertex $v$ for which $\dout[M](v) = 1$ is a \emph{passenger}, and a
vertex for which $\dout[M](v) = 0$ is a \emph{driver} who has
$\din[M](v)$ passengers.  In the \carpool problem the goal is to find
a matching $M$ of maximum total weight.
%
The problem arises when designing an online carpool service, such as
Zimride~\cite{zimride}, which tries to connect between passengers and
drivers based on a similarity function.  The problem is known to be
NP-hard, even for uniform weights and infinite capacities.
%
The \gcp problem, is an extension of the \carpool where each vertex
represents an unsplittable group of passengers.  Formally, each vertex
$u \in V$ has a size $s(u) \in \N$, and the constraint $\din(v) \leq
c(v)$ is replaced with $\sum_{u:(u,v) \in M} s(u) \leq c(v)$.

We show that \carpool can be formulated as an unconstrained submodular
maximization problem, thus it admits a $\frac{1}{2}$-approximation
algorithm.  We show that the same formulation does not work for \gcp,
nevertheless, we present a $(\frac{1}{2} - \eps)$-approximation
algorithm for \gcp.
%
For the unweighted variant of both problems when the maximum possible
capacity, $\cmax \eqdf \max_{v \in V} c(v)$, is bounded by a constant,
we provide a $(\half + \inv{2\cmax} - \eps)$-approximation algorithm.
We also show that the problem remains APX-hard, even if $\cmax \leq
3$.
